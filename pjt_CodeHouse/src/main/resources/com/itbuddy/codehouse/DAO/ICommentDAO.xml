<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itbuddy.codehouse.DAO.ICommentDAO">

	<select id="select" resultType="com.itbuddy.codehouse.DTO.Comment" parameterType="com.itbuddy.codehouse.DTO.Comment">
		SELECT *
        FROM comment
        <trim prefix="WHERE"  prefixOverrides="AND|OR">
            <if test="cmt_no != null">AND cmt_no=#{cmt_no}</if> 
            <if test="cmt_title != null">AND cmt_title=#{cmt_title}</if>
            <if test="cmt_content != null">AND cmt_content=#{cmt_content}</if> 
            <if test="cmt_create_time != null">AND cmt_create_time=#{cmt_create_time}</if>
            <if test="cmt_modify_time != null">AND cmt_modify_time=#{cmt_modify_time}</if>
            <if test="mem_id != null">AND mem_id=#{mem_id}</if>            
        </trim>
        <choose>
            <when test="asc">
                ORDER BY #{order} ASC
            </when>
            <otherwise>
                ORDER BY #{order} DESC
            </otherwise>
        </choose>
		
    </select>
    
    <update id="update" parameterType="com.itbuddy.codehouse.DTO.Comment">
        UPDATE comment
        <trim prefix="SET"  suffixOverrides=",">
            <if test="cmt_title != null">cmt_title=#{cmt_title},</if>
            <if test="cmt_content != null">cmt_content=#{cmt_content},</if> 
            <if test="cmt_create_time != null">cmt_create_time=#{cmt_create_time},</if>
            <if test="cmt_modify_time != null">cmt_modify_time=#{cmt_modify_time},</if>
            <if test="mem_id != null">mem_id=#{mem_id},</if>            
        </trim>           
         WHERE cmt_no=#{cmt_no}
    </update>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.itbuddy.codehouse.DTO.Comment">
        INSERT INTO comment(cmt_no, cmt_title, cmt_content, cmt_create_time, cmt_modify_time, mem_id)
		values(#{cmt_no},#{cmt_title},#{cmt_content},#{cmt_create_time},#{cmt_modify_time},#{mem_id})
    </insert>
	
</mapper>
